name: Tagging
on:
  workflow_run:
    workflows: [Python Testing"]
    branches: [main]
    types:
      - completed
jobs:
  Tag-Release:
    runs-on: [self-hosted, docker]
    if: github.ref == 'refs/heads/main'
    steps:
      - run: echo "Lets tag!"
      - uses: actions/checkout@v2
      - name: Tag On Main
        uses: butlerlogic/action-autotag@stable
        with:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
          strategy: regex # Optional since regex_pattern is defined
          root: "src/dyscord/version.py"
          regex_pattern: "__version__ = '(.*)'"
          tag_prefix: "v"
          tag_message: "Autogenerated tag."
