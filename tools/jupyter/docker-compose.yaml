version: '3.4'

services:
    simple-discord-jupyter:
        build:
          context: ../../
          dockerfile: tools/jupyter/Dockerfile
          network: host
        ports:
          - 8888:8888
          - 8000:8000
        user: "${UID}:${GID}"
        volumes:
          - ./examples/:/home/jovyan/examples/
          - ../../src/simple_discord:/opt/conda/lib/python3.9/site-packages/simple_discord:ro
        command: "start-notebook.sh --NotebookApp.token='' --NotebookApp.password='' --ip=${HOST_ADDRESS} --ServerApp.root_dir='/home/jovyan/examples/'"
        network_mode: host
        environment:
          - JUPYTER_ENABLE_LAB=yes
